# Weather Appの作成

## はじめに
業務で生産データの可視化アプリを作成することになったので、その勉強として過去の気象情報をグラフで可視化できるアプリ「Weather App」を作成しました。  
作成したアプリについての詳細な説明は以下ページで行っています。  
https://troubled-event-601.notion.site/Weather-App-278465c59ef3804098c2f80c7c24e4b2?pvs=74  

## 使用した技術
フロント側：html、css（scss）、JavaScript  
バッグエンド側：PHP 8.2、MySQL 8.0、apache  
テスト環境：PHPUnit 9.6.29（PHPの単体テストのみ実施）  
環境構築：Docker 28.3.3  

## 設計について
MVCモデルを基本に開発を行いました。  
ただし、検索処理に関してはAPIのような実装を行いました。より詳細には、非同期通信を行ってJSONデータでクライアント/サーバ間のやり取りを行い、SPAに近い動作としました。  
※ 検索処理の都度、HTMLの描画まですべてサーバサイドで行うと処理コストが上がりパフォーマンスの大幅な低下につながると考えたため

## 使用方法
ローカル環境で使用する方法について簡単に説明します。
> [!WARNING]
> 動作にはLinuxとDocker環境が必要となります。

### 1. セットアップ

#### ▸クローン
お手元PCの任意の場所にクローンしたら以下のコマンドでweatherディレクトリ直下へ移動しクローンが正常に行われたかを確認します。
```
cd weather && ls
```
以下のような表示がされればクローンは成功です。
```
docker  docker-compose.yml  src
```
#### ▸docker
次に以下のコマンドを実行してdockerイメージの生成とコンテナの作成・起動を行います。
```
docker compose build && docker compose up -d
```
これで無事成功の出力が行われればdockerを用いた環境構築は完了です。

#### ▸ライブラリのインストール
コンテナが起動したら以下のコマンドでコンテナ内へ移動します。
```
docker compose exec app bash
```
そして以下のコマンドを実行して必要なライブラリ群のインストールを行います。
```
composer require
```
上記のコマンドを入力すると、以下のような画面が現れるので手順に沿ってインストールを進めていきます。
```
Search for a package: "Enterキー"をclick
Do you want to re-run the command with --dev? [yes]? "yes"と入力
```
インストールが無事完了すればライブラリのインストールも完了です。

#### ▸データベース構築
最後にデータベースの構築を行います。以下のコマンドをコンテナに入った状態で実行するとテーブルの作成と気象データのデータベースへの登録が自動で行われます。
```
php initialize_weather_data.php
```
完了のメッセージが出力されればデータベースの構築処理は終了となります。

#### ▸アクセス方法
データベース構築まで完了するとローカルホスト内にアプリが立ち上がった状態となるので以下のURLを入力するとアクセスできます。
```
http://localhost:8080/
```
正常にアプリ画面が立ち上がればすべての作業は終了となります。
